<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/index.css"/>
	</head>
	<body>
		<!--模拟屏幕区-->
		<div id="wrap">
			<header class="header">
				<div class="topHeader">
					<h1 class="logo">
						<a href="javascript:;"><img src="img/logo.png" alt="" /></a>
					</h1>
					<a href="javascript:;" class="menuBtn menuBtnClose"></a>
					<div class="buts">
						<a href="javascript:;">搜索</a>
						<a href="javascript:;">登录</a>
						<a href="javascript:;">注册</a>
					</div>
				</div>
				<form class="search">
					<input type="text" placeholder="请输入搜索内容。。。"/>
					<input type="submit" value="搜索"/>
				</form>
				<ul class="mask">
					<li>
						<a href="javascript:;">首页</a>
					</li>
					<li>
						<a href="javascript:;">MV</a>
					</li>
					<li>
						<a href="javascript:;">悦单</a>
					</li>
					<li>
						<a href="javascript:;">V榜</a>
					</li>
					<li>
						<a href="javascript:;">音悦</a>
					</li>
					<li>
						<a href="javascript:;">商城</a>
					</li>
					<li>
						<a href="javascript:;">节目</a>
					</li>
					<li>
						<a href="javascript:;">饭团</a>
					</li>
					<li>
						<a href="javascript:;">资讯</a>
					</li>
					<li>
						<a href="javascript:;">我的家</a>
					</li>
					<li>
						<a href="javascript:;">APP下载</a>
					</li>
					<li>
						<a href="javascript:;">热门应用</a>
					</li>
				</ul>
			</header>
			<div class="contentWrap">
			<div class="content">
				<nav class="navWrap">
					<ul class="navList">
						<li class="active">
							<a href="javascript:;">首页</a>
						</li>
						<li class="">
							<a href="javascript:;">MV</a>
						</li>
						<li class="">
							<a href="javascript:;">悦单</a>
						</li>
						<li class="">
							<a href="javascript:;">V榜</a>
						</li>
						<li class="">
							<a href="javascript:;">音悦</a>
						</li>
						<li class="">
							<a href="javascript:;">商城</a>
						</li>
						<li class="">
							<a href="javascript:;">节目</a>
						</li>
						<li class="">
							<a href="javascript:;">饭团</a>
						</li>
						<li class="">
							<a href="javascript:;">资讯</a>
						</li>
						<li class="">
							<a href="javascript:;">我的家</a>
						</li>
						<li class="">
							<a href="javascript:;">APP下载</a>
						</li>
						<li class="">
							<a href="javascript:;">热门应用</a>
						</li>
					</ul>
				</nav>
				<div class="bannerWrap">
					<ul class="bannerList">
						<li><a href="javascript:;"><img src="img/1.jpg" alt="" /></a></li>
						<li><a href="javascript:;"><img src="img/2.jpg" alt="" /></a></li>
						<li><a href="javascript:;"><img src="img/3.jpg" alt="" /></a></li>
						<li><a href="javascript:;"><img src="img/4.jpg" alt="" /></a></li>
						<li><a href="javascript:;"><img src="img/5.jpg" alt="" /></a></li>
					</ul>
					<div class="icons">
						<span class="active"></span>
						<span></span>
						<span></span>
						<span></span>
						<span></span>
					</div>
				</div>
				<div class="tab">
					<header class="tabHeader">
						<h3>MV首播</h3>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<nav class="tabNav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<span class="smallGreen"></span>
					</nav>
					<div class="tabWrap">
						<ul class="loading"></ul>
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
						</ul>
						<ul class="loading"></ul>
					</div>
				</div>
				<div class="tab">
					<header class="tabHeader">
						<h3>MV首播</h3>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<nav class="tabNav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<span class="smallGreen"></span>
					</nav>
					<div class="tabWrap">
						<ul class="loading"></ul>
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
						</ul>
						<ul class="loading"></ul>
					</div>
				</div>
				<div class="tab">
					<header class="tabHeader">
						<h3>MV首播</h3>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<nav class="tabNav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<span class="smallGreen"></span>
					</nav>
					<div class="tabWrap">
						<ul class="loading"></ul>
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
						</ul>
						<ul class="loading"></ul>
					</div>
				</div>
				<div class="tab">
					<header class="tabHeader">
						<h3>MV首播</h3>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<nav class="tabNav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<span class="smallGreen"></span>
					</nav>
					<div class="tabWrap">
						<ul class="loading"></ul>
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
						</ul>
						<ul class="loading"></ul>
					</div>
				</div>
				<div class="tab">
					<header class="tabHeader">
						<h3>MV首播</h3>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<nav class="tabNav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<span class="smallGreen"></span>
					</nav>
					<div class="tabWrap">
						<ul class="loading"></ul>
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
						</ul>
						<ul class="loading"></ul>
					</div>
				</div>
				<div class="tab">
					<header class="tabHeader">
						<h3>MV首播</h3>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<nav class="tabNav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<span class="smallGreen"></span>
					</nav>
					<div class="tabWrap">
						<ul class="loading"></ul>
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg"/>
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<span class="left">777</span>
									<span class="right">55</span>
								</div>
							</li>
						</ul>
						<ul class="loading"></ul>
					</div>
				</div>
			</div>
			</div>
			<div id="scrollBar"></div>
		</div>
		
	</body>
	<script src="js/changeClass.js"></script>
	<script src="js/transform.js"></script>
	<script src="js/drag.js"></script>
	<script>
		document.addEventListener('touchstart',function(event){
			event.preventDefault();
		})
		
		!(function(){
			var width = document.documentElement.clientWidth;
			var styleNode = document.createElement('style');
			styleNode.innerHTML = 'html{font-size: '+ width/16 +'px !important;}';
			document.head.appendChild(styleNode);
		})();
		
		
	
		
		!(function(){
			var aNodes = document.querySelectorAll('a');
			for(var i = 0; i < aNodes.length; i++){
				aNodes[i].addEventListener('touchstart',function(){
					window.location.href = this.href;
				})
			}
		})();
		
		window.onload = function(){
			changeMenu();
			changeFocus();
			navDrag();
			changeColor();
			banner();
			tabDrag();
			drag();
		}
		
		//菜单按钮切换
		
		function changeMenu(){
			var menuBtn = document.querySelector('#wrap .header .topHeader .menuBtn');
			var mask = document.querySelector('#wrap .header .mask');
			var flag = false;
			menuBtn.addEventListener('touchstart',function(event){
				if(flag){
					removeClass(menuBtn,'menuBtnOpen');
					addClass(menuBtn,'menuBtnClose');
					mask.style.display = 'none';
					
				}else{
					removeClass(menuBtn,'menuBtnClose');
					addClass(menuBtn,'menuBtnOpen');
					mask.style.display = 'block';
				}
				flag = !flag;
				event.stopPropagation();
				event.preventDefault();
				
			});
			
			//点击除了按钮以外的地方，也要去隐藏
			
			document.addEventListener('touchstart',function(){
				if(flag){
					removeClass(menuBtn,'menuBtnOpen');
					addClass(menuBtn,'menuBtnClose');
					mask.style.display = 'none';
					flag = false;
				}
			})
			
			
			//点击mask，不隐藏
			
			mask.addEventListener('touchstart',function(){
				event.stopPropagation();
				event.preventDefault();
			})
		}
		
		//搜索框获取和失去焦点
		
		function changeFocus(){
			var input = document.querySelector('#wrap .header .search input[type="text"]');
			input.addEventListener('touchstart',function(){
				input.focus();
			})
			document.addEventListener('touchstart',function(){
				input.blur();
			})
		
		}
		
		
		//导航的滑动
		
		function navDrag(){
			var navWrap = document.querySelector('#wrap .content .navWrap');
			var navList = document.querySelector('#wrap .content .navWrap .navList');
			transformCss(navList,'translateZ',0.1);
			var startX = 0;
			var eleX = 0;
			var s1 = 0;
			var s2 = 0;
			var t1 = 0;
			var t2 = 0;
			
			navWrap.addEventListener('touchstart',function(event){
				var touch = event.changedTouches[0];
				navList.style.transition = 'none';
				eleX = transformCss(navList,'translateX');
				startX = touch.clientX;
				s1 = eleX;
				t1 = new Date().getTime();//毫秒
				
				
			});
			
			navWrap.addEventListener('touchmove',function(event){
				var touch = event.changedTouches[0];
				var endX = touch.clientX;
				var disX = endX - startX;
				var lastX = eleX + disX;
				//当滑倒边界的时候，会出现橡皮筋效果
				if(lastX > 0){
					//每一次的移动 lasx不断增大，但是系数再不断减小。也就是每一次拉的时候，走的实际距离会越小
					var scale = 0.6 - lastX/(3*document.documentElement.clientWidth);
					lastX = lastX * scale;
				}else if(lastX < document.documentElement.clientWidth - navList.offsetWidth){
					var temp = Math.abs(lastX) - Math.abs(document.documentElement.clientWidth - navList.offsetWidth);
					var scale = 0.6 - temp/(3*document.documentElement.clientWidth);
					temp = temp * scale;
					lastX = document.documentElement.clientWidth - navList.offsetWidth - temp;
				}
				transformCss(navList,'translateX',lastX);
			});
			
			navWrap.addEventListener('touchend',function(){
				//手指离开后会有一个加速的效果/求一个速度
				s2 = transformCss(navList,'translateX');
				t2 = new Date().getTime();
				var speed = (s2 - s1) / (t2 -t1);
				var lastX = transformCss(navList,'translateX');
				lastX = lastX + speed * 100;
				
				var bezier= '';
				
				if(lastX > 0){
					lastX = 0;
					bezier = 'cubic-bezier(.13,.67,.85,1.43)';
				}else if(lastX < document.documentElement.clientWidth - navList.offsetWidth){
					lastX = document.documentElement.clientWidth - navList.offsetWidth;
					bezier = 'cubic-bezier(.13,.67,.85,1.43)';
				}
				
				navList.style.transition = '1s '+bezier;
				transformCss(navList,'translateX',lastX);
				
			})
		}
		
		//nav点击变色
		
		function changeColor(){
			var liNodes = document.querySelectorAll('#wrap .content .navWrap .navList li');
			var isMove = false;
			for(var i = 0; i < liNodes.length; i++){
				liNodes[i].addEventListener('touchmove',function(){
					isMove = true;
				})
				
				liNodes[i].addEventListener('touchend',function(){
					if(!isMove){
						for(var j = 0; j < liNodes.length; j++){
							liNodes[j].className = '';
						}
						this.className = 'active';
					}
					isMove = false;
					
				});
			}
		}
		
		//banner滑屏
		
		function banner(){
			//因为图片我们不知道给多少张，所以宽度不能给定，要去动态设置
			var bannerWrap = document.querySelector('#wrap .content .bannerWrap');
			var bannerList = document.querySelector('#wrap .content .bannerWrap .bannerList');
			transformCss(bannerList,'translateZ',0.1);
			//无缝
			bannerList.innerHTML += bannerList.innerHTML;
			
			var liNodes = document.querySelectorAll('#wrap .content .bannerWrap .bannerList li');
			var spanNodes = document.querySelectorAll('#wrap .content .bannerWrap .icons span');
			var styleNode = document.createElement('style');
			styleNode.innerHTML = '#wrap .content .bannerWrap .bannerList {width: '+ liNodes.length +'00%;}';
			styleNode.innerHTML += '#wrap .content .bannerWrap .bannerList li {width: '+ 100/liNodes.length +'%;}';
			document.head.appendChild(styleNode);
			
			
			var startX = 0;
			var eleX = 0;
			var disX = 0;
			var index = 0;
			var startY = 0;
			var isFirst = true;
			var timer = null;
			
			bannerWrap.addEventListener('touchstart',function(event){
				var touch = event.changedTouches[0];
				bannerList.style.transition = 'none';
				
				if(index == 0){
					index = spanNodes.length;
				}else if(index == liNodes.length - 1){
					index = spanNodes.length - 1;
				}
				
				var lastX = -index * document.documentElement.clientWidth;
				transformCss(bannerList,'translateX',lastX);
				
				eleX = transformCss(bannerList,'translateX');
				startX = touch.clientX;
				startY = touch.clientY;
				isFirst = true;
				
				clearInterval(timer)
			});
			
			bannerWrap.addEventListener('touchmove',function(event){
				var touch = event.changedTouches[0];
				var endX = touch.clientX;
				var endY = touch.clientY;
				disX = endX - startX;
				disY = endY - startY;
				
				if(!isFirst){
					return;
				}
				
				//防抖动
				if(Math.abs(disX) < Math.abs(disY)){
					isFirst = false;
					return;
				}
				
				
				var lastX = eleX + disX;
				transformCss(bannerList,'translateX',lastX);
			});
			
			bannerWrap.addEventListener('touchend',function(){
				//当手指放开向左滑和向右滑最终的位置是整张图片的位置
				var lastX = transformCss(bannerList,'translateX');
				
	//			if(disX < 0){
	//				//求取图片的索引值
	//				index = Math.ceil(-lastX/document.documentElement.clientWidth);
	//				lastX = -index * document.documentElement.clientWidth;
	//			}else{
	//				index = Math.floor(-lastX/document.documentElement.clientWidth);
	//				lastX = -index * document.documentElement.clientWidth;
	//			}
				index = Math.round(-lastX/document.documentElement.clientWidth);
				lastX = -index * document.documentElement.clientWidth;
				bannerList.style.transition = '.5s';
				transformCss(bannerList,'translateX',lastX);
				
				//小圆点
				for(var i = 0; i < spanNodes.length; i++){
					spanNodes[i].className = '';
				}
				spanNodes[index%spanNodes.length].className = 'active';
				
				auto();
			});
			
			//自动轮播
//			auto();
			function auto(){
				timer = setInterval(function(){
					if(index == 9){
						index = 4;
						var lastX = -index * document.documentElement.clientWidth
						bannerList.style.transition = 'none';
						transformCss(bannerList,'translateX',lastX);
					}
					setTimeout(function(){
						index++;
						var lastX = -index * document.documentElement.clientWidth;
						bannerList.style.transition = '1s';
						transformCss(bannerList,'translateX',lastX);
						for(var i = 0; i < spanNodes.length; i++){
							spanNodes[i].className = '';
						}
						spanNodes[index%spanNodes.length].className = 'active';
					},20);
					
				},2000)
			}
		}
		
		//tab的滑屏
		
		function tabDrag(){
			var tabWrapList = document.querySelectorAll('#wrap .content .tab .tabWrap');
			var tabNavList = document.querySelectorAll('#wrap .content .tab .tabNav');
			var width = tabNavList[0].offsetWidth;
			
			for(var i = 0; i < tabWrapList.length; i++){
				move(tabWrapList[i],tabNavList[i]);
			}
			
			function move(tabWrap,tabNav){
				transformCss(tabWrap,'translateZ',0.1);
				transformCss(tabWrap,'translateX',-width);
				var eleX = 0;
				var startX = 0;
				var isLoading = false;
				var disX = 0;
				var index = 0;
				var startY = 0;
				var isFirst = true;
				var loadings = tabWrap.querySelectorAll('.loading');
				var smallGreen = tabNav.querySelector('.smallGreen');
				var aNodes = tabNav.querySelectorAll('a');
				
				tabWrap.addEventListener('touchstart',function(event){
					var touch = event.changedTouches[0];
					tabWrap.style.transition = 'none';
					smallGreen.style.transition = 'none';
					eleX = transformCss(tabWrap,'translateX');
					startX = touch.clientX;
					startY = touch.clientY;
					isFirst = true;
				});
				
				tabWrap.addEventListener('touchmove',function(event){
					var touch = event.changedTouches[0];
					if(isLoading){
						return;
					}
					
					if(!isFirst){
						return;
					}
					
					var endX = touch.clientX;
					var endY = touch.clientY;
					disX = endX - startX;
					disY = endY - startY;
					
					if(Math.abs(disX) < Math.abs(disY)){
						isFirst = false;
						return;
					}
					
					
					var lastX = eleX + disX;
					transformCss(tabWrap,'translateX',lastX);
					
					if(Math.abs(disX) > width/2){
						if(disX < 0){
							lastX = -2*width
						}else{
							lastX = 0;
						}
						tabWrap.style.transition = '1s';
						transformCss(tabWrap,'translateX',lastX);
						isLoading = true;
						
						//小绿跟着滑
						if(disX < 0){
							index++;
						}else{
							index--;
						}
						
						if(index < 0){
							index = aNodes.length-1;
						}else if(index > aNodes.length-1){
							index = 0;
						}
						
						lastX = index * smallGreen.offsetWidth;
						smallGreen.style.transition = '1s';
						transformCss(smallGreen,'translateX',lastX);
						
						
						//等滑过去之后，我们需要让加载图显示出来,对过渡检测添加事件
						tabWrap.addEventListener('transitionend',func);
						tabWrap.addEventListener('webkitTransitionEnd',func);
						
						function func(){
							if(disX < 0){
								loadings[0].style.opacity = 0;
								loadings[1].style.opacity = 1;
							}else{
								loadings[0].style.opacity = 1;
								loadings[1].style.opacity = 0;
							}
							
							tabWrap.removeEventListener('transitionend',func);
							tabWrap.removeEventListener('webkitTransitionEnd',func);
							
							//模拟数据加载过程
							setTimeout(function(){
								lastX = -width;
								tabWrap.style.transition = 'none';
								transformCss(tabWrap,'translateX',lastX);
								isLoading = false;
								loadings[0].style.opacity = 0;
								loadings[1].style.opacity = 0;
							},2000)
						}
					}
				});
				
				tabWrap.addEventListener('touchend',function(event){
					if(Math.abs(disX) < width/2){
						var lastX = -width;
						tabWrap.style.transition = '1s';
						transformCss(tabWrap,'translateX',lastX);
					}
				});
			}
		}
		
		
		
		function drag(){
			//整体竖向滑屏
			var contentWrap = document.querySelector('#wrap .contentWrap');
			var content = document.querySelector('#wrap .contentWrap .content');
			transformCss(content,'translateZ',0.1);
			//滚动条逻辑
			var scrollBar = document.getElementById('scrollBar');
			var scale = document.documentElement.clientHeight/content.offsetHeight;
			scrollBar.style.height = document.documentElement.clientHeight * scale + 'px';
			
			var callback = {
				start:function(){
					scrollBar.style.opacity = 1;
				},
				move:function(){
					scrollBar.style.opacity = 1;
					var lastY = transformCss(content,'translateY');
					transformCss(scrollBar,'translateY',-lastY * scale);
				},
				end:function(){
					console.log(111);
					scrollBar.style.opacity = 0;
					
				}
			}
			contentDrag(contentWrap,callback)
		}
		
		
		
	</script>
</html>
